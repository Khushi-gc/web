---
import brandVideo from "../assets/images/brand-video.mp4";

const comparisonData = [
  {
    label: "Focus",
    standard: {
      title: "Information",
      desc: "You learn a skill or subject in isolation.",
    },
    aveka: {
      title: "Mobility",
      desc: "You get the end-to-end support to move your life and career.",
    },
  },
  {
    label: "Financial Plan",
    standard: {
      title: "The Cost",
      desc: "You pay for courses, but the funding is your problem.",
    },
    aveka: {
      title: "The Capital",
      desc: "We help you find the money via loans, scholarships, and grants.",
    },
  },
  {
    label: "Relocation",
    standard: {
      title: "DIY",
      desc: "You handle visas, forex, and accommodation yourself.",
    },
    aveka: {
      title: "Integrated",
      desc: "Expert-led Visa support, Forex, and move-in logistics.",
    },
  },
  {
    label: "Guidance",
    standard: {
      title: "Generic",
      desc: "Standardized help-centers and forums.",
    },
    aveka: {
      title: "Personalized",
      desc: "AI-powered matching + 1-on-1 Academic Counseling.",
    },
  },
  {
    label: "Career Entry",
    standard: {
      title: "Passive",
      desc: "You get a certificate and apply on your own.",
    },
    aveka: {
      title: "Active",
      desc: "Direct access to Global Internships and profile building.",
    },
  },
];
---

<section class="family-roles">
  <div class="video-bg">
    <video src={brandVideo} autoplay muted loop playsinline> </video>
    <div class="overlay"></div>
  </div>

  <div class="container-fluid relative z-10 text-white">
    <div class="max-w-6xl mx-auto">
      <div class="header-split">
        <div class="max-w-2xl reveal-text">
          <h2 class="display-title">
            Beyond the Classroom: <br />
            <span class="text-sub"
              ><h4>Why an "Ecosystem" is the Key to Mobility</h4></span
            >
          </h2>
          <p class="description">
            Most platforms provide separated services, but they leave you to
            figure out the logistics alone. Aveka Prime is a Global Mobility
            Ecosystem designed to move you from your current location to your
            target campus or career.
          </p>
        </div>
        <div class="quote-box-wrapper reveal-text">
          <!-- Quote box removed/merged as requested content didn't explicitly separate it, but desc covers it. Keeping wrapper if needed or removing if strictly text only. 
                        The prompt implies the text "We bridge..." is part of the main block description now, but it was in a quote box before. 
                        I will put the last sentence in the quote box for emphasis as it matches the previous layout's intent. -->
          <div class="quote-box">
            <p class="quote">
              "We bridge the gap between 'Learning' and 'Moving' by integrating
              funding, logistics, and academic counseling into one seamless
              ecosystem."
            </p>
          </div>
        </div>
      </div>

      <!-- Comparison Table -->
      <div class="comparison-table reveal-table">
        <div class="comparison-grid">
          <!-- Headers (Desktop Only for Labels) -->
          <div class="grid-header label-header">The Goal</div>
          <div class="grid-header standard-header">
            Standard Study Platforms
          </div>
          <div class="grid-header aveka-header">The Aveka Ecosystem</div>

          <!-- Content Rows -->
          {
            comparisonData.map((item) => (
              <>
                <div class="grid-cell label-cell">
                  <span class="label-text">{item.label}</span>
                </div>

                <div class="grid-cell content-cell standard-cell group-hover-gray">
                  <div class="mobile-label">Standard</div>
                  <div class="cell-head">
                    <span class="icon cross">✕</span>
                    <span class="cell-title title-red">
                      {item.standard.title}
                    </span>
                  </div>
                  <p class="cell-desc">{item.standard.desc}</p>
                </div>

                <div class="grid-cell content-cell aveka-cell group-hover-purple">
                  <div class="mobile-label">Aveka</div>
                  <div class="cell-head">
                    <span class="icon check">✓</span>
                    <span class="cell-title title-purple">
                      {item.aveka.title}
                    </span>
                  </div>
                  <p class="cell-desc highlight">{item.aveka.desc}</p>
                </div>
              </>
            ))
          }
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  :root {
    --primary-purple: #660ef0;
    --text-muted: #6b7280;
    --border-light: rgba(59, 130, 246, 0.1); /* blue-500/10 */
  }

  .family-roles {
    position: relative;
    width: 100%;
    color: white;
    padding-bottom: 4rem;
    overflow: hidden;
  }

  /* Video Background */
  .video-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
  }

  .video-bg video {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .video-bg .overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(98, 0, 238, 0.9); /* Purple overlay */
    backdrop-filter: blur(2px);
  }

  /* Layout Containers */
  .container-fluid {
    width: 100%;
    padding: 0.5rem 0.5rem; /* Reduced horizontal padding on mobile */
    overflow-x: hidden; /* Prevent horizontal scroll */
  }

  @media (min-width: 768px) {
    .container-fluid {
      padding: 2rem;
    }
  }

  .max-w-6xl {
    max-width: 1200px;
    margin: 0 auto;
  }

  .header-split {
    display: flex;
    flex-direction: column;
    gap: 3rem;
    margin-bottom: 5rem;
    margin-top: 4rem;
  }

  @media (min-width: 1024px) {
    .header-split {
      flex-direction: row;
      justify-content: space-between;
      align-items: flex-start;
    }
  }

  .max-w-2xl {
    max-width: 42rem;
  }

  /* Typography */
  .display-title {
    font-size: 2.25rem;
    line-height: 1.1;
    font-weight: 800;
    text-transform: uppercase;
    margin-bottom: 1.5rem;
    letter-spacing: -0.01em;
    font-family: "Inter", sans-serif;
  }

  @media (min-width: 1024px) {
    .display-title {
      font-size: 3.75rem;
    }
  }

  .text-sub {
    color: rgba(255, 255, 255, 0.8);
    display: block; /* Ensure it breaks to new line if not already */
    margin-top: 0.5rem;
  }

  .text-sub h4 {
    font-size: 1.5rem;
    font-weight: 600;
    margin: 0;
    line-height: 1.3;
    text-transform: none; /* Optional: keep regular case if desired, or inherit */
    font-family: "Inter", sans-serif;
  }

  @media (min-width: 1024px) {
    .text-sub h4 {
      font-size: 2rem;
    }
  }

  .description {
    font-size: 1.125rem;
    color: rgba(255, 255, 255, 0.7);
    line-height: 1.625;
    max-width: 36rem;
  }

  /* Quote Box */
  /* Quote Box */
  .quote-box {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(12px);
    padding: 1rem; /* Further reduced padding on mobile */
    border-radius: 1rem;
    border: 1px solid rgba(255, 255, 255, 0.2);
    max-width: 100%; /* Full width on mobile */
    width: 100%;
    height: auto; /* Let it size to content */
    display: flex;
    align-items: center;
    margin-top: 2rem;
    box-sizing: border-box; /* Include padding in width calculation */
  }

  @media (min-width: 768px) {
    .quote-box {
      max-width: 26rem;
      padding: 2rem;
      margin-top: 4rem;
    }
  }

  .quote {
    font-size: 0.95rem; /* Smaller on mobile */
    font-style: italic;
    color: rgba(255, 255, 255, 0.9);
    margin: 0;
    line-height: 1.5;
    word-wrap: break-word; /* Allow long words to break */
    overflow-wrap: break-word; /* Modern property */
    hyphens: auto; /* Enable hyphenation */
  }

  @media (min-width: 768px) {
    .quote {
      font-size: 1.25rem;
    }
  }

  /* Comparison Grid Refactor */
  .comparison-table {
    background: white;
    border-radius: 1.5rem;
    overflow: hidden;
    box-shadow: 0 25px 50px -12px rgba(62, 53, 53, 0.25);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: #1a1a1a;
  }

  .comparison-grid {
    display: grid;
    /* Mobile First: Label full width, then 2 cols for comparison */
    grid-template-columns: 1fr 1fr;
    width: 100%;
  }

  @media (min-width: 768px) {
    .comparison-grid {
      /* Desktop: Label, Standard, Aveka columns */
      grid-template-columns: 1fr 1.25fr 1.25fr;
    }
  }

  /* Header Cells */
  .grid-header {
    background: #fcfcfc;
    padding: 1.5rem 2rem;
    font-size: 1.1rem;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--primary-purple);
    border-bottom: 2px solid var(--border-light);
    display: none; /* Hidden on mobile by default */
  }

  .standard-header {
    color: #1a1a1a;
  }
  .aveka-header {
    color: #1a1a1a;
  }

  @media (min-width: 768px) {
    .grid-header {
      display: flex;
      align-items: center;
      justify-content: center; /* Center all by default */
    }
    .label-header {
      justify-content: center;
    }
    .standard-header,
    .aveka-header {
      justify-content: center;
    }
  }

  /* Cells */
  .grid-cell {
    padding: 1rem;
    border-bottom: 1px solid var(--border-light);
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  @media (min-width: 768px) {
    .grid-cell {
      padding: 1.5rem 2rem;
    }
  }

  /* Cells */
  .table-cell {
    padding: 0 2rem;
    display: flex;
    align-items: center;
    border-bottom: none; /* Connect visually with content below */
  }

  /* Fix: Ensure label spans full width on mobile */
  .label-cell {
    grid-column: 1 / -1;
  }

  @media (min-width: 768px) {
    .label-cell {
      grid-column: auto;
      background: #eee6fe; /* Keep branding */
      align-items: center;
      border-bottom: 1px solid var(--border-light);
      border-right: 1px solid var(--border-light); /* Separator */
      text-align: center;
    }
  }

  .label-text {
    font-weight: 800;
    font-size: 1.1rem;
    color: var(--primary-purple);
  }

  .header-cell {
    height: 6rem;
  }

  .label-cell,
  .content-cell {
    min-height: 80px;
    padding-top: 1rem;
    padding-bottom: 1rem;
  }

  /* Mobile Labels inside cells */
  .mobile-label {
    display: block;
    font-size: 0.65rem;
    text-transform: uppercase;
    color: #9ca3af;
    margin-bottom: 0.5rem;
    font-weight: 600;
  }

  @media (min-width: 768px) {
    .mobile-label {
      display: none;
    }
  }

  .group-hover-gray:hover {
    background-color: #f9fafb;
  }
  .group-hover-purple:hover {
    background-color: rgba(98, 0, 238, 0.05);
  }

  /* Cell Content */
  .cell-head {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 0.5rem;
  }

  .icon {
    width: 1.5rem;
    height: 1.5rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.625rem;
    font-weight: 800;
    flex-shrink: 0;
  }

  .cross {
    background: #fce7f3;
    color: #dc2626;
  }
  .check {
    background: #f3e8ff;
    color: var(--primary-purple);
  }

  .cell-title {
    font-weight: 700;
    font-size: 0.875rem;
  }

  .title-red {
    color: #ef4444;
  }
  .title-purple {
    color: var(--primary-purple);
  }

  .cell-desc {
    font-size: 0.85rem;
    color: var(--text-muted);
    line-height: 1.4;
    margin: 0;
  }

  .highlight {
    font-weight: 500;
  }

  /* Utilities */
  .reveal-text,
  .reveal-table {
    opacity: 0;
    transform: translateY(20px);
  }
</style>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  document.addEventListener("DOMContentLoaded", () => {
    // Header text reveal
    gsap.utils.toArray(".reveal-text").forEach((el: any, i) => {
      gsap.to(el, {
        scrollTrigger: {
          trigger: el,
          start: "top 80%",
        },
        y: 0,
        opacity: 1,
        duration: 1,
        delay: i * 0.2,
        ease: "power3.out",
      });
    });

    // Table specific animation
    gsap.to(".reveal-table", {
      scrollTrigger: {
        trigger: ".reveal-table",
        start: "top 85%",
      },
      y: 0,
      opacity: 1,
      duration: 1.2,
      ease: "power2.out",
    });
  });
</script>
