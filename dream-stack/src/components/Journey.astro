---
import card1 from "../assets/images/confidence_card1.jpg";
import card2 from "../assets/images/confidence_card2.jpg";
import card3 from "../assets/images/confidence_card3.jpg";

const cards = [
  {
    title: "Purpose-Built Education Loans",
    description:
      "We provide accessible financing strictly for your academic journey. From tuition to living expenses, our 60+ partners offer collateral-free options designed for students. <br><br><strong>The Guardrail:</strong> Specialized funding for domestic and international degrees.<br><strong>The Stat:</strong> $72M+ in student-specific loans facilitated.",
    image: card1,
    icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 16" class="w-9 h-9 fill-brand-purple"><path fill-rule="evenodd" d="M1.837 2.929V4.39h17.538v1.462H1.837v7.307a.735.735 0 0 0 .73.731h16.077a.735.735 0 0 0 .731-.73V5.851h1.462v7.307a2.19 2.19 0 0 1-2.193 2.193H2.567a2.19 2.19 0 0 1-2.192-2.193V2.93A2.19 2.19 0 0 1 2.567.736h16.077a2.19 2.19 0 0 1 2.193 2.193V4.39h-1.462V2.93a.735.735 0 0 0-.73-.731H2.566a.734.734 0 0 0-.73.73m1.461 4.384h4.385v1.462H3.298z" clip-rule="evenodd"></path></svg>`,
  },
  {
    title: "Academic & Admissions Counseling",
    description:
      "Our experts donâ€™t just give advice; they provide a data-backed roadmap for your education.<br><br><strong>The Focus:</strong> 1-on-1 guidance on university selection, admission strategies, and academic career pathing.<br><strong>The Stat:</strong> 13,000+ students guided to their ideal campus.",
    image: card2,
    icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" class="w-9 h-9 fill-brand-purple"><path fill-rule="evenodd" d="M35.077 9.23v27.26l-5.668-2.835-5.409 3.6-5.41-3.6-5.667 2.834V9.231zm3.692 0h-3.692V5.539H9.23v36.924l9.101-4.551L24 41.695l5.668-3.784 9.101 4.55zm-7.384 3.693h-14.77v3.692h14.77zm-14.77 7.385h14.77V24h-14.77z" clip-rule="evenodd"></path></svg>`,
  },
  {
    title: "Specialized Test Preparation",
    description:
      "Success in your academic journey starts with the right scores. Our modules are built strictly for language and entrance exams (IELTS, etc.).<br><br><strong>The Focus:</strong> Self-paced, adaptive learning that targets your academic weaknesses.",
    image: card3,
    icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" class="w-9 h-9 fill-brand-purple"><path fill-rule="evenodd" d="M.154 14C.154 6.364 6.364.154 14 .154S27.847 6.364 27.847 14 21.637 27.846 14 27.846.154 21.636.154 14m2.77 0c0 6.106 4.97 11.077 11.076 11.077S25.077 20.107 25.077 14c0-6.106-4.97-11.077-11.077-11.077C7.894 2.923 2.924 7.893 2.924 14m14.993 3.916A5.54 5.54 0 0 0 19.539 14h2.77a8.308 8.308 0 0 1-16.616 0h2.769a5.538 5.538 0 0 0 9.455 3.916M11.23 8.462H8.462V14h2.77zm5.539 0h2.769V14h-2.77z" clip-rule="evenodd"></path></svg>`,
  },
];
---

<section class="money-confidence" id="money-confidence">
  <div class="container">
    <div class="header-section fade-in-section">
      <div class="title-col">
        <h2>EMPOWERING YOUR JOURNEY</h2>
      </div>
      <div class="desc-col">
        <p>
          From funding to specialized counseling, Aveka provides the targeted
          resources you need to achieve your global ambitions.
        </p>
      </div>
    </div>

    <!-- Cards Wrapper -->
    <div class="cards-wrapper fade-in-section delay-200">
      {
        cards.map((card) => (
          <div class="card">
            <!-- Mobile Layout: Image + Content vertical -->
            <div class="card-bg-mobile mobile-only">
                 <img src={card.image.src} alt={card.title} loading="lazy" />
                 <div class="mobile-icon-overlay">
                    <div class="icon" set:html={card.icon} />
                 </div>
            </div>
            
            <div class="card-content-mobile mobile-only">
                <h4>{card.title}</h4>
                <div class="desc-text" set:html={card.description} />
            </div>

            <!-- Desktop Inner: Retaining the Flex Accordion -->
            <div class="card-inner desktop-only">
               <img src={card.image.src} alt={card.title} class="card-bg" />
               <div class="card-overlay" />
               <div class="card-content-wrapper">
                  <div class="glass-panel">
                    <div class="content-flex">
                      <div class="icon-box">
                        <div class="icon" set:html={card.icon} />
                      </div>
                      <div class="text-content">
                        <h4>{card.title}</h4>
                        <div class="description-wrapper">
                          <p set:html={card.description} />
                        </div>
                      </div>
                    </div>
                  </div>
               </div>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>

<style>
  /* Mobile First Styles */
  .money-confidence {
    width: 100%;
    padding: 4rem 0;
    background: #fff;
    color: #000;
    overflow: hidden;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1.5rem;
  }

  /* Header */
  .header-section {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    margin-bottom: 3rem;
  }

  .title-col h2 {
    font-size: 2.25rem;
    line-height: 1.1;
    font-weight: 800;
    text-transform: uppercase;
    color: #1a1a1a;
    margin: 0;
  }

  .desc-col p {
    font-size: 1rem;
    color: #6b7280;
    line-height: 1.6;
    margin: 0;
  }

  /* Cards Wrapper Default (Mobile) */
  .cards-wrapper {
    display: flex;
    flex-direction: column;
    gap: 2.5rem;
    width: 100%;
  }

  /* Mobile Card Styling */
  .card {
    display: flex;
    flex-direction: column;
    width: 100%;
    border-radius: 1.5rem;
    overflow: hidden;
    background: white;
    box-shadow: 0 4px 20px rgba(0,0,0,0.06);
    border: 1px solid #f0f0f0;
  }

  .card-bg-mobile {
    width: 100%;
    height: 220px;
    position: relative;
    overflow: hidden;
  }

  .card-bg-mobile img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .mobile-icon-overlay {
    position: absolute;
    bottom: -1.5rem; /* Overlap content slightly or floating */
    right: 1.5rem;
    width: 3.5rem;
    height: 3.5rem;
    background: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    z-index: 5;
    bottom: 1rem; /* Adjust to sit inside image area */
  }

  .mobile-icon-overlay .icon :global(svg) {
    width: 1.8rem;
    height: 1.8rem;
    fill: #660ef0;
  }

  .card-content-mobile {
    padding: 1.5rem;
  }

  .card-content-mobile h4 {
    font-size: 1.35rem;
    font-weight: 800;
    margin: 0 0 0.75rem 0;
    color: #1a1a1a;
  }

  .desc-text {
    font-size: 1rem;
    color: #4b5563;
    line-height: 1.6;
  }

  /* Utilities */
  .mobile-only { display: block; }
  .desktop-only { display: none; }
  
  /* Fade In Animation State */
  .fade-in-section {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.8s ease-out, transform 0.8s ease-out;
  }
  .fade-in-section.visible {
    opacity: 1;
    transform: translateY(0);
  }
  .delay-200 { transition-delay: 0.2s; }

  /* DESKTOP STYLES (Progressive Enhancement) */
  @media (min-width: 1024px) {
    .money-confidence {
      padding: 6rem 0;
    }
    
    .container {
      padding: 0 2rem;
    }

    .header-section {
      flex-direction: row;
      justify-content: space-between;
      align-items: flex-end;
      gap: 2rem;
      margin-bottom: 4rem;
    }

    .title-col h2 {
      font-size: 3.5rem;
      max-width: 650px;
    }

    .desc-col p {
      font-size: 1.125rem;
      max-width: 500px;
    }

    .mobile-only { display: none; }
    .desktop-only { display: block; }

    /* Cards - Flex Accordion */
    .cards-wrapper {
      flex-direction: row;
      min-height: 600px;
      gap: 1.5rem;
    }

    .card {
        flex: 1;
        min-width: 0;
        height: auto;
        border-radius: 2rem;
        background: #f3f4f6;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        border: 1px solid #e5e7eb;
        transition: flex 0.7s cubic-bezier(0.25, 1, 0.5, 1), filter 0.5s ease, opacity 0.5s ease;
        overflow: hidden;
    }

    .cards-wrapper:hover .card:not(:hover) {
        filter: grayscale(1);
        opacity: 0.6;
    }

    .card:hover {
       flex: 4;
    }
    
    .card-inner {
        position: relative;
        width: 100%;
        height: 100%;
    }

    .card-bg {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        filter: grayscale(0.5);
        transition: filter 0.7s ease;
    }

    .card:hover .card-bg {
        filter: grayscale(0);
    }

    .card-overlay {
        position: absolute;
        inset: 0;
        background: linear-gradient(
          to top,
          rgba(0, 0, 0, 0.6) 0%,
          transparent 50%,
          transparent 100%
        );
        opacity: 0.6;
        transition: opacity 0.5s ease;
    }

    .card:hover .card-overlay {
        opacity: 0.4;
    }
    
    .card-content-wrapper {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        padding: 2rem;
        transform: translateY(1rem); 
        transition: transform 0.5s ease;
    }

    .card:hover .card-content-wrapper {
        transform: translateY(0);
    }

    .glass-panel {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(12px);
        padding: 2rem;
        border-radius: 1.5rem;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        transition: all 0.5s ease;
        max-width: 100%;
    }

    .card:hover .glass-panel {
      max-width: 32rem; 
    }

    .content-flex {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
    }

    .icon-box {
        transform-origin: left;
        transition: transform 0.5s ease;
    }
  
    .card:hover .icon-box {
      transform: scale(1.1) rotate(6deg);
    }
  
    .icon :global(svg) {
      width: 2.5rem;
      height: 2.5rem;
      fill: #660ef0; 
    }
    
    .text-content h4 {
        font-size: 1.5rem;
        font-weight: 700;
        color: #1a1a1a;
        margin: 0 0 0.75rem 0;
        transition: transform 0.5s ease, color 0.5s ease;
        transform-origin: left;
    }

    .description-wrapper {
        max-height: 0;
        opacity: 0;
        overflow: hidden;
        transition: all 0.7s cubic-bezier(0.25, 1, 0.5, 1);
    }
    
    .card:hover .description-wrapper {
        max-height: 15rem;
        opacity: 1;
    }

    .description-wrapper p {
        margin: 0;
        color: #6b7280;
        line-height: 1.6;
        font-size: 1rem;
    }
  }
</style>

<script>
  // Simple Intersection Observer Implementation
  document.addEventListener("DOMContentLoaded", () => {
    const observerOptions = {
        threshold: 0.1,
        rootMargin: "0px 0px -50px 0px"
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
                observer.unobserve(entry.target);
            }
        });
    }, observerOptions);

    const elements = document.querySelectorAll('.fade-in-section');
    elements.forEach(el => observer.observe(el));
  });
</script>

